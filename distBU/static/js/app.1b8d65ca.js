(function(){"use strict";var e={1073:function(e,t){t["default"]={NO_LOT_SELECTED:"Not selected",action_indexes:{tare:0,setZero:1,cancel:2,capture:3},request_statuses:{requested:0,onSucess:1,onError:2},noOfDefects:12,keys_to_filter:["A","B","C","D"],keys:["1","2","3","A","4","5","6","B","7","8","9","C","*","0","#","D"],defects:{1:{name:"BB",id:0,shortcut:"1",description:"BB"},2:{name:"SBB",id:1,shortcut:"2",description:"SBB"},3:{name:"HD",id:2,shortcut:"3",description:"HD"},4:{name:"M",id:3,shortcut:"4",description:"M"},5:{name:"S",id:4,shortcut:"5",description:"S"},6:{name:"LD",id:5,shortcut:"6",description:"LD"},7:{name:"OS",id:6,shortcut:"7",description:"OS"},8:{name:"OS2",id:7,shortcut:"8",description:"OS2"},9:{name:"O2",id:8,shortcut:"9",description:"O2"},0:{name:"FB",id:9,shortcut:"0",description:"FB"},"-":{name:"OSM",id:10,shortcut:"-",description:"OSM"},tab:{name:"ST",id:14,shortcut:"tab",description:"ST"},shift:{name:"GR",id:12,shortcut:"shift",description:"GR"},escape:{name:"GC",id:15,shortcut:"escape",description:"GC"},control:{name:"SC",id:11,shortcut:"control",description:"SC"},capslock:{name:"T",id:13,shortcut:"capslock",description:"T"}},actions:{" ":{name:"CAPTURE",description:"Capture",shortcut:"space"},c:{name:"CANCEL",description:"Cancel",shortcut:"c"},m:{name:"TOGGLE",description:"Toggle",shortcut:"m"},z:{name:"ZERO",description:"Zero",shortcut:"z"},t:{name:"TARE",description:"Tare",shortcut:"t"},b:{name:"BBT",description:"Broken BT",shortcut:"b"},e:{name:"EXTRA",description:"Extra image",shortcut:"e"}},url:function(){return"http://127.0.0.1:"},url_server:function(){return""},url_port:function(){return console.warn("production"),"3002"}}},6199:function(e,t,a){var l=a(9242),o=a(3396),s=a(7139),n=a(7718),i=a(6281),r=a(7312),d=a(9234),u=a(3289),c=a(3140),m=a(5030);const h={class:"status_bar"},f={class:"d-flex align-center"},p=(0,o._)("h5",null,"Device Status",-1);function _(e,t,a,l,_,g){const w=(0,o.up)("router-view"),k=(0,o.up)("request-modal");return(0,o.wg)(),(0,o.j4)(n.q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c.O,{class:"main-container"},{default:(0,o.w5)((()=>[(0,o.Wm)(i.L,{class:"px-4"},{default:(0,o.w5)((()=>[(0,o.Wm)(m.q,{class:"h4-header"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(this.$route.name),1)])),_:1}),(0,o.Wm)(d.C),(0,o.Wm)(r.T,{text:"",to:"/"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-microscope")])),_:1}),(0,o.Uk)(" Analysis")])),_:1}),(0,o.Wm)(r.T,{text:"",to:"/history"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-format-list-bulleted-square")])),_:1}),(0,o.Uk)(" History")])),_:1}),(0,o.Wm)(r.T,{text:"",to:"/config"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-cog")])),_:1}),(0,o.Uk)(" Configuration")])),_:1})])),_:1}),(0,o.Wm)(w),(0,o._)("div",h,[(0,o._)("div",f,[p,(0,o.Uk)(": "),(0,o._)("u",{class:(0,s.C_)(["ml-2",e.socket_status?"text-green":"text-red"])},(0,s.zw)(e.socket_status?"Connected":"Disconnected"),3)]),(0,o.Wm)(d.C),(0,o._)("h5",null,(0,s.zw)(e.currentDateTime),1)]),(0,o.Wm)(k)])),_:1})])),_:1})}var g=a(1073),w=a(65),k=a(2066),v=a(3711);const y=(0,k.ZP)(g["default"].url_server());var b={name:"App",components:{requestModal:v.Z},computed:{...(0,w.rn)(["socket_instance"])},data:()=>({socket_status:!1,currentDateTime:""}),methods:{updateTime(){const e=new Date,t=this.formatTime(e.getHours()),a=this.formatTime(e.getMinutes()),l=this.formatTime(e.getSeconds()),o=this.formatTime(e.getDate()),s=this.formatTime(e.getMonth()+1),n=e.getFullYear();this.currentDateTime=`${o}/${s}/${n} ${t}:${a}:${l}`},formatTime(e){return e<10?`0${e}`:e}},mounted(){const{socket_instance:e}=this;y.on("connect",(()=>{this.socket_status=!0,console.warn("connected")})),y.on("disconnect",(()=>{this.socket_status=!1,console.warn("disconnected")})),this.$store.dispatch("setSocketInstance",y),this.updateTime(),setInterval(this.updateTime,1e3)}},W=a(89);const C=(0,W.Z)(b,[["render",_]]);var x=C,L=a(2483),U=a(3369),T=a(6824);const D=(0,o._)("div",null,[(0,o._)("h1",null,"Configuration: Vision")],-1);function S(e,t,a,l,s,n){return(0,o.wg)(),(0,o.j4)(U.K,null,{default:(0,o.w5)((()=>[D,(0,o.Wm)(T.o)])),_:1})}var O={name:"Vision",data(){return{config:g["default"]}},computed:{...(0,w.rn)({}),...(0,w.Se)({})},methods:{getConfig(){}},mounted(){}};const E=(0,W.Z)(O,[["render",S]]);var z=E,V=a(11),j=a(1888),A=a(4075),Z=a(8521),$=a(2329),M=a(3150),I=a(2127),B=a(7769),q=a(8389);const N={class:"d-flex mb-5"},F=(0,o._)("p",{class:"mt-4"},"List of providers",-1);function P(e,t,a,l,s,n){const i=(0,o.up)("router-link"),r=(0,o.up)("add-lot"),d=(0,o.up)("lot-list");return(0,o.wg)(),(0,o.j4)(U.K,{style:{height:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(T.o,{style:{height:"100%"},justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.D,{cols:"10"},{default:(0,o.w5)((()=>[(0,o._)("div",N,[(0,o.Wm)(i,{to:"/config",size:"x-large",variant:"plain"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-arrow-left")])),_:1}),(0,o.Uk)(" Back ")])),_:1})]),(0,o.Wm)(V._,{elevation:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)($.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Add new Lot #")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Here you can add a new Lot to be processed ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{ref:"addLotModal",onOnFinish:n.editedHandler},null,8,["onOnFinish"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(A.J),F,(0,o.Wm)(d,{ref:"lots",editable:"",onEditLot:n.selectedLot},null,8,["onEditLot"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var R=a(2326),K=a(883),H={name:"LotInfo",components:{addLot:R.Z,lotList:K.Z},data(){return{lot:{supplier:"",lot_no:"",production_date:"",fish_species:"",type:"",size:"",order_no:"",wms_code:""}}},computed:{url_port(){return g["default"].url_port()},lotStructure(){return{supplier:"",lot_no:"",production_date:"",fish_species:"",type:"",size:"",order_no:"",wms_code:""}},...(0,w.rn)({}),...(0,w.Se)({})},methods:{editedHandler(){console.log("editedHandler"),this.$refs.lots.getLots()},selectedLot(e){this.$refs.addLotModal.editItem(e)}},mounted(){}};const Y=(0,W.Z)(H,[["render",P]]);var G=Y;const J=e=>((0,o.dD)("data-v-73efe078"),e=e(),(0,o.Cn)(),e),X={class:"d-flex mb-5"},Q=J((()=>(0,o._)("p",{class:"mt-4"},"Select the Lot# that you want to export its data",-1)));function ee(e,t,a,l,s,n){const i=(0,o.up)("router-link"),d=(0,o.up)("lot-list"),c=(0,o.up)("requestModal");return(0,o.wg)(),(0,o.j4)(U.K,{style:{height:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(T.o,{style:{height:"100%"},justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.D,{cols:"10"},{default:(0,o.w5)((()=>[(0,o._)("div",X,[(0,o.Wm)(i,{to:"/config",size:"x-large",variant:"plain"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-arrow-left")])),_:1}),(0,o.Uk)(" Back ")])),_:1})]),(0,o.Wm)(V._,{elevation:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)($.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Export data")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Here you can export your data from the Lot # to excel ")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(A.J),Q,(0,o.Wm)(d,{ref:"lots",selectable:"",onRowClicked:n.selectedItem},null,8,["onRowClicked"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(r.T,{onClick:t[0]||(t[0]=e=>n.exportData()),disabled:!e.selected_item,color:"primary",class:"download-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-file-excel")])),_:1}),(0,o.Uk)(" Export ")])),_:1},8,["disabled"]),(0,o.Wm)(c,{ref:"loadingModal"},null,512)])),_:1})}var te=a(4161),ae={name:"LotInfo",components:{lotList:K.Z,requestModal:v.Z},data:()=>({selected_item:null}),computed:{url_port:()=>g["default"].url_port(),url:()=>g["default"].url()},methods:{selectedItem(e){this.selected_item=e},async exportData(){this.$refs.loadingModal.open();const e=`${this.url}${this.url_port}`,t=`/download-lot-samples/${this.selected_item.lot_no}`;(0,te.Z)({url:`${e+t}`,method:"GET",responseType:"blob"}).then((e=>{this.$refs.loadingModal.success();const t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",`lot_${this.selected_item.lot_no}.xlsx`),document.body.appendChild(a),a.click()}),(e=>{console.log(e),this.$refs.loadingModal.fail()}))}}};const le=(0,W.Z)(ae,[["render",ee],["__scopeId","data-v-73efe078"]]);var oe=le,se=a(1334),ne=a(3601);const ie=e=>((0,o.dD)("data-v-57b0b194"),e=e(),(0,o.Cn)(),e),re={class:"d-flex align-baseline"},de=ie((()=>(0,o._)("h3",{class:"mb-3 ml-4"},"Lot #:",-1))),ue=["src"],ce=["src"],me=ie((()=>(0,o._)("h2",null,"Weight:",-1))),he={class:"ml-3"},fe={class:"d-flex flex-column align-center"},pe=ie((()=>(0,o._)("h2",null,"Weight:",-1))),_e={class:"ml-3"},ge={class:"d-flex flex-column align-center"},we=ie((()=>(0,o._)("div",{class:"px-5 pt-4 text-h6"},"Alert",-1))),ke=ie((()=>(0,o._)("div",{class:"pb-3 pt-2 text-body-2"},[(0,o.Uk)(" You're leaving without "),(0,o._)("b",null,"save"),(0,o.Uk)(","),(0,o._)("br"),(0,o.Uk)(" Would you like to save the last test? ")],-1)));function ve(e,t,a,l,n,i){const c=(0,o.up)("select-lot"),m=(0,o.up)("preview-extra-image"),h=(0,o.up)("notification"),f=(0,o.up)("commandList");return(0,o.wg)(),(0,o.j4)(U.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o._)("div",re,[de,(0,o._)("u",{onClick:t[0]||(t[0]=(...e)=>i.chooseLot&&i.chooseLot(...e)),class:"text-blue ml-1"},(0,s.zw)(e.getAnalyzingLotNo),1),(0,o.Wm)(d.C),(0,o.Wm)(r.T,{onClick:t[1]||(t[1]=e=>i.takeExtraPicture())},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-camera-plus")])),_:1}),(0,o.Uk)(" Take extra picture ")])),_:1}),(0,o.Wm)(r.T,{to:"/broken-belly-test"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-arrow-expand-horizontal")])),_:1}),(0,o.Uk)(" BBT ")])),_:1})]),(0,o.Wm)(T.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z.D,{style:{"border-right":"solid 1px lightgray"},cols:"6"},{default:(0,o.w5)((()=>[(0,o._)("img",{class:"the_fuckin_image elevation-2",src:`${i.url_server}video_feed`,crossorigin:"anonymous",ref:"liveImage"},null,8,ue)])),_:1}),(0,o.Wm)(Z.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o._)("img",{class:"the_fuckin_image elevation-2",src:e.analyzed_image,ref:"capturedImage",crossorigin:"anonymous"},null,8,ce)])),_:1})])),_:1}),(0,o.Wm)(T.o,{style:{"border-bottom":"solid 1px lightgray"},class:"pb-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.D,{cols:"6",class:"d-flex flex-column px-7",style:{"border-right":"solid 1px lightgray"}},{default:(0,o.w5)((()=>[me,(0,o._)("h1",he,(0,s.zw)(e.live.weight)+" g",1),(0,o.Wm)(T.o,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.live.indicators,((e,t)=>((0,o.wg)(),(0,o.j4)(Z.D,{cols:"2",class:"d-flex px-3 indicator-wrapper"},{default:(0,o.w5)((()=>[(0,o._)("div",fe,[(0,o._)("span",{class:(0,s.C_)("text-"+(e.status?"black":"grey"))},(0,s.zw)(e.name),3),(0,o._)("div",{class:(0,s.C_)(["indicator",e.status?"active":"inactive"])},null,2)])])),_:2},1024)))),256))])),_:1})])),_:1}),(0,o.Wm)(Z.D,{cols:"6",class:"d-flex flex-column px-7"},{default:(0,o.w5)((()=>[pe,(0,o._)("h1",_e,(0,s.zw)(e.captured.weight)+" g",1),(0,o.Wm)(T.o,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.captured.indicators,((e,t)=>((0,o.wg)(),(0,o.j4)(Z.D,{cols:"2",class:"d-flex px-3 indicator-wrapper"},{default:(0,o.w5)((()=>[(0,o._)("div",ge,[(0,o._)("span",{class:(0,s.C_)("text-"+(e.status?"black":"grey"))},(0,s.zw)(e.name),3),(0,o._)("div",{class:(0,s.C_)(["indicator",e.status?"active":"inactive"])},null,2)])])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1}),(0,o.Wm)(T.o,{class:"mt-0"},{default:(0,o.w5)((()=>[(0,o.Wm)(d.C),(0,o.Wm)(r.T,{onClick:i.finishLotAnalysis,size:"x-large",color:"success",class:"mr-5 mt-5"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-check")])),_:1}),(0,o.Uk)(" Finish Lot ")])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(ne.B,{persistent:"",modelValue:e.saveDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.saveDialog=t),transition:"dialog-bottom-transition",width:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(V._,null,{default:(0,o.w5)((()=>[we,(0,o.Wm)(j.Z,null,{default:(0,o.w5)((()=>[ke])),_:1}),(0,o.Wm)(se.h,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{color:"red",variant:"text",onClick:i.cancel},{default:(0,o.w5)((()=>[(0,o.Uk)(" No ")])),_:1},8,["onClick"]),(0,o.Wm)(r.T,{color:"success",variant:"text",onClick:i.saveData},{default:(0,o.w5)((()=>[(0,o.Uk)(" Yes ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(c,{ref:"selectLotModal",modelValue:e.lot,"onUpdate:modelValue":t[3]||(t[3]=t=>e.lot=t)},null,8,["modelValue"]),(0,o.Wm)(m,{ref:"imagePreview",image:e.extraImage,onAdd:i.addExtraImage,onClose:i.canceledExtraImage},null,8,["image","onAdd","onClose"]),(0,o.Wm)(h,{ref:"notification"},null,512),(0,o.Wm)(f,{"commands-list":i.getCommands},null,8,["commands-list"])])),_:1})}a(7658),a(2801),a(3767),a(8585),a(8696);var ye=a(7943),be=a(7096),We=a(2798),Ce=a(8694);function xe(e,t,a,l,s,n){const i=(0,o.up)("request-modal");return(0,o.wg)(),(0,o.j4)(ne.B,{persistent:"",modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),width:"40%"},{default:(0,o.w5)((()=>[(0,o.Wm)(V._,{height:"100%",class:"pa-5"},{default:(0,o.w5)((()=>[e.imagePreview?((0,o.wg)(),(0,o.j4)(Ce.f,{key:0,src:e.imagePreview,width:"100%",class:"mx-auto"},null,8,["src"])):(0,o.kq)("",!0),(0,o.Wm)(se.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d.C),(0,o.Wm)(r.T,{color:"warning",text:"",onClick:n.close},{default:(0,o.w5)((()=>[(0,o.Uk)("Close")])),_:1},8,["onClick"]),(0,o.Wm)(r.T,{color:"primary",text:"",onClick:n.add},{default:(0,o.w5)((()=>[(0,o.Uk)("Add")])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(i,{ref:"loadingModal"},null,512)])),_:1},8,["modelValue"])}var Le={name:"previewExtraImage",props:{image:{type:Blob,required:!0}},components:{requestModal:v.Z},data:()=>({imagePreview:null,show:!1}),computed:{...(0,w.Se)(["getAnalyzingLotNo"]),url_server:()=>g["default"].url_server(),url_port:()=>g["default"].url_port(),url:()=>g["default"].url()},methods:{previewImage(){const e=new FileReader;e.readAsDataURL(this.image),e.onload=e=>{this.imagePreview=e.target.result}},open(){this.show=!0},close(){this.show=!1},cancel(){this.$emit("close")},add(){this.saveData()},saveData(){this.saveDialog=!1;const{imagePreview:e,getAnalyzingLotNo:t}=this,a=`${t}-${(new Date).getTime()}.jpg`,[l,o]=e.split(","),s=l.match(/:(.*?);/)[1],n=atob(o),i=new ArrayBuffer(n.length),r=new Uint8Array(i);for(let c=0;c<n.length;c++)r[c]=n.charCodeAt(c);const d=new File([r],a,{type:s}),u=new FormData;u.append("lot_no",t),u.append("image",d),this.submitRequest(u)},async submitRequest(e){this.$refs.loadingModal.open(),te.Z.post(`${this.url}${this.url_port}/add-lot-image`,e,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then((e=>{this.$refs.loadingModal.success(),this.$emit("close")}),(e=>{console.log(e),this.$refs.loadingModal.fail()}))}},watch:{image:function(e){console.warn("image changed"),e&&this.previewImage()}}};const Ue=(0,W.Z)(Le,[["render",xe]]);var Te=Ue,De={components:{selectLot:ye.Z,notification:We.Z,PreviewExtraImage:Te,commandList:be.Z},data:()=>({lot:null,saveDialog:!1,to:null,live:{weight:0,indicators:[]},captured:{weight:0,indicators:[]},analyzed_image:null,capture_state:!0,analysis_data:null,laser_state:!1,extraImage:null}),computed:{...(0,w.rn)(["socket_instance"]),...(0,w.Se)(["getAnalyzingLotNo"]),url_server:()=>g["default"].url_server(),url_port:()=>g["default"].url_port(),url:()=>g["default"].url(),getCommands:()=>{const{actions:e,defects:t}=g["default"];return{...t,...e}},filtered_indicators(){const{indicators:e}=this.captured;return e.reduce(((e,t,a)=>(t.status&&e.push(t.id),e)),[])}},methods:{notify(e,t="success"){this.$refs.notification.push(e,t)},updateNet(){this.socket_instance.emit("update_net",{})},evokeAction(e){switch(e){case"CAPTURE":this.capture();break;case"CANCEL":this.cancel();break;case"TOGGLE":this.toggle_laser();break;case"TARE":this.setTare();break;case"ZERO":this.setZero();break;case"EXTRA":if(g["default"].NO_LOT_SELECTED==this.getAnalyzingLotNo)return;this.takeExtraPicture();break;case"BBT":if(g["default"].NO_LOT_SELECTED==this.getAnalyzingLotNo)return;this.$router.push("/broken-belly-test");break}},keyboardCatch(e){const t=e.key.toLowerCase(),{defects:a,actions:l}=g["default"],{indicators:o}=this.live;if(a.hasOwnProperty(t)){e.preventDefault();const a=o.findIndex((e=>e.key.toLowerCase()==t));this.live.indicators[a].status=!o[a].status}else if(l.hasOwnProperty(t)){const a=l[t].name;e.preventDefault(),console.warn("action",a),this.evokeAction(a)}},setTare(){this.notify("Tare command sent","success"),this.socket_instance.emit("set_tare",{})},setZero(){this.notify("Zero command sent","success"),this.socket_instance.emit("set_zero",{})},toggle_laser(){this.laser_state=!this.laser_state,this.notify("Laser "+(this.laser_state?"ON":"OFF"),"success"),this.socket_instance.emit("laser",{state:this.laser_state})},canceledExtraImage(){this.extraImage=null,this.$refs.imagePreview.close()},addExtraImage(){this.extraImage=null,this.$refs.imagePreview.close()},finishLotAnalysis(){this.lot=null},capture(){this.analyzed_image&&this.saveData(),this.captured=JSON.parse(JSON.stringify(this.live)),this.putData("capture",{}),this.capture_state=!this.capture_state,this.resetLive()},cancel(){this.saveDialog=!1,this.resetCaptured(),this.resetLive(),this.analyzed_image=null},dataURLtoFile(e,t,a=!1){const l=document.createElement("canvas"),o=l.getContext("2d");l.width=1e3,l.height=650,o.drawImage(e,0,0);const s=l.toDataURL("image/jpeg");if(a){const e=s.split(","),t=e[0].match(/:(.*?);/)[1],a=atob(e[1]);let l=a.length;const o=new Uint8Array(l);while(l--)o[l]=a.charCodeAt(l);return new Blob([o],{type:t})}const n=s.split(","),i=n[0].match(/:(.*?);/)[1],r=atob(n[1]);let d=r.length;const u=new Uint8Array(d);while(d--)u[d]=r.charCodeAt(d);return new File([u],t,{type:i})},chooseLot(){this.$refs.selectLotModal.open_select=!0},saveData(){this.saveDialog=!1;const e=this.$refs.capturedImage,t=this.dataURLtoFile(e,"image.jpg"),{analysis_data:a,filtered_indicators:l,captured:o}=this,{weight:s}=o,n=new FormData;n.append("defects",JSON.stringify(l)),n.append("weight",s),n.append("length",a.length),n.append("height",a.height),n.append("head",a.head),n.append("tail_trigger",a.tail_trigger),n.append("image",t),n.append("lot_no",this.getAnalyzingLotNo),this.submitRequest(n)},async submitRequest(e){te.Z.post(`${this.url}${this.url_port}/add`,e,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then((e=>{}),(e=>{this.confirm=!1,console.log(e)}))},putData(e,t){this.socket_instance.emit(e,t),console.warn("putData",e,t)},resetCaptured(){this.captured.indicators.forEach((e=>{e.status=!1})),this.captured.weight=0},resetLive(){this.live.indicators.forEach((e=>{e.status=!1})),this.live.weight=0},takeExtraPicture(){const e=this.$refs.liveImage,t=this.$refs.imagePreview;this.extraImage=this.dataURLtoFile(e,"image.jpg",!0),t.open()}},beforeRouteLeave(e,t,a){console.warn("a donde puto"),this.analyzed_image?(this.to=e,this.saveDialog=!0):a()},mounted(){var{defects:e}=g["default"];window.addEventListener("keyup",this.keyboardCatch),this.interval=setInterval(this.updateNet,250),Object.keys(e).forEach(((t,a)=>{const{name:l,id:o}=e[t];this.live.indicators.push({name:l,status:!1,key:t,id:o}),this.captured.indicators.push({name:l,status:!1,key:t,id:o})})),window.addEventListener("beforeunload",(e=>{this.analyzed_image&&(this.saveDialog=!0,e.preventDefault(),e.returnValue="")}));const{socket_instance:t}=this;t.emit("set_tare",{}),t.emit("enter_to_weight_mode",{}),t.on("weight_update",(e=>{this.live.weight=e})),t.on("analysis_data",(e=>{const t=JSON.parse(e);this.analysis_data=t})),t.on("frame_ready",(()=>{this.analyzed_image=`${this.url_server}analyzed_image?${Date.now()}`})),this.getAnalyzingLotNo==g["default"].NO_LOT_SELECTED&&(this.$refs.selectLotModal.should_persist=!0,this.chooseLot())},beforeDestroy(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},beforeUnmount(){window.removeEventListener("keyup",this.keyboardCatch),this.socket_instance.off("weight_update"),this.socket_instance.off("analysis_data"),this.socket_instance.off("frame_ready"),this.interval&&clearInterval(this.interval)},watch:{lot:{handler:function(e,t){console.warn("lot changed",e,t),this.$store.dispatch("setAnalyzingLot",e),null==e&&(this.$refs.selectLotModal.should_persist=!0,this.chooseLot())},deep:!0}}};const Se=(0,W.Z)(De,[["render",ve],["__scopeId","data-v-57b0b194"]]);var Oe=Se;const Ee=(0,o._)("div",null,[(0,o._)("h1",null,"Configuration: LoadCell")],-1);function ze(e,t,a,l,s,n){return(0,o.wg)(),(0,o.j4)(U.K,null,{default:(0,o.w5)((()=>[Ee,(0,o.Wm)(T.o)])),_:1})}var Ve={name:"LoadCell",data(){return{}},computed:{...(0,w.rn)({}),...(0,w.Se)({})},methods:{getConfig(){}},mounted(){}};const je=(0,W.Z)(Ve,[["render",ze]]);var Ae=je;const Ze={class:"mb-3"},$e={class:"mt-10 mb-3"},Me={class:"mt-10 mb-3"};function Ie(e,t,a,l,s,n){const i=(0,o.up)("calibrate-scale");return(0,o.wg)(),(0,o.j4)(U.K,{style:{height:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(T.o,{style:{height:"100%"},justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.D,{cols:"10"},{default:(0,o.w5)((()=>[(0,o._)("h3",Ze,[(0,o.Wm)(u.t,{class:"mr-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-weight")])),_:1}),(0,o.Uk)(" Load Cell ")]),(0,o.Wm)(V._,{elevation:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)($.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Calibrate")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" with this parameter you can calibrate the load cell ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1})])),_:1}),(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Tare")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" with this parameter you setup the Tare ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{onClick:t[0]||(t[0]=e=>n.setTare()),color:"primary",class:"buttons"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{class:"mr-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-scale-balance")])),_:1}),(0,o.Uk)(" Tare ")])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Zero")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" with this parameter you can set the Zero ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{onClick:t[1]||(t[1]=e=>n.setZero()),color:"primary",class:"buttons"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{class:"mr-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-numeric-0-box")])),_:1}),(0,o.Uk)(" Zero ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o._)("h3",$e,[(0,o.Wm)(u.t,{class:"mr-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-eye")])),_:1}),(0,o.Uk)(" Vision parameters ")]),(0,o.Wm)(V._,{elevation:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)($.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Calibrate ZOI")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Live calibrate the vision analysis parameters ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{to:"/config/vision-calibration",color:"primary",class:"buttons"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Manage ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o._)("h3",Me,[(0,o.Wm)(u.t,{class:"mr-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-package-variant-closed")])),_:1}),(0,o.Uk)(" Lots Information ")]),(0,o.Wm)(V._,{elevation:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)($.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("List of lots")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Edit, add or delete lots to analyze ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{to:"/config/lot-info",color:"primary",class:"buttons"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{class:"mr-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-view-list")])),_:1}),(0,o.Uk)(" Manage ")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(M.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(I.V,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Export data")])),_:1}),(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Export lots data to a CSV file ")])),_:1}),(0,o.Wm)(q.m,{class:"justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{to:"/config/export-lot-data",color:"primary",class:"buttons"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{class:"mr-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-download")])),_:1}),(0,o.Uk)(" Manage ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Be=a(6572);const qe=e=>((0,o.dD)("data-v-17efd3e4"),e=e(),(0,o.Cn)(),e),Ne=qe((()=>(0,o._)("span",{class:"headline"},"Choose load cell",-1))),Fe={class:"headline"};function Pe(e,t,a,l,n,i){const c=(0,o.up)("request-modal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(ne.B,{persistent:"",modelValue:e.choose_scale,"onUpdate:modelValue":t[3]||(t[3]=t=>e.choose_scale=t),"max-width":"450px"},{default:(0,o.w5)((()=>[(0,o.Wm)(V._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Be.E,null,{default:(0,o.w5)((()=>[Ne])),_:1}),(0,o.Wm)(se.h,{class:"d-flex justify-center pt-3 pb-9"},{default:(0,o.w5)((()=>[(0,o.Wm)(V._,{onClick:t[0]||(t[0]=e=>i.setScale("belly")),hover:"",width:"180px",class:"weight-cards elevation-3 mr-5",height:"200px"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{size:"40"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-hook")])),_:1}),(0,o.Uk)(" Broken Belly ")])),_:1}),(0,o.Wm)(V._,{onClick:t[1]||(t[1]=e=>i.setScale("weight")),hover:"",width:"180px",class:"weight-cards elevation-3",height:"200px"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{size:"40"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-weight-gram")])),_:1}),(0,o.Uk)(" Whole Fish ")])),_:1})])),_:1}),(0,o.Wm)(r.T,{color:"red",text:"",onClick:t[2]||(t[2]=e=>i.cancel())},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(ne.B,{modelValue:e.calibrate_dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.calibrate_dialog=t),persistent:"","max-width":"600px"},{default:(0,o.w5)((()=>[(0,o.Wm)(V._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Be.E,null,{default:(0,o.w5)((()=>[(0,o._)("span",Fe,(0,s.zw)(e.step_info.message),1)])),_:1}),(0,o.Wm)(se.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r.T,{color:"red",text:"",onClick:t[4]||(t[4]=e=>i.cancel())},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(d.C),(0,o.Wm)(r.T,{color:e.step<3?"primary":"green",text:"",onClick:i.nextStep},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(3==e.step?"Save":"Next")+" ",1),(0,o.Wm)(u.t,{right:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)("mdi-"+(3==e.step?"check":"arrow-right")),1)])),_:1})])),_:1},8,["color","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(c,{ref:"loadingModal"},null,512),(0,o.Wm)(r.T,{onClick:i.openModal,color:"primary",class:"buttons"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.t,{class:"mr-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-weight-gram")])),_:1}),(0,o.Uk)(" Calibrate ")])),_:1},8,["onClick"])])}var Re={name:"calibrateScale",components:{requestModal:v.Z},data:()=>({calibrate_dialog:!1,choose_scale:!1,step:0,args:0,responseTimeOut:null,step_info:{message:"",icon:""}}),computed:{...(0,w.rn)(["socket_instance"]),url_port:()=>g["default"].url_port(),url:()=>g["default"].url(),calibration_steps:()=>[{message:"Click next to start calibration",icon:"mdi-weight-gram"},{message:"Place the empty container on the scale and press OK",icon:"mdi-weight-gram"},{message:"Place the container with the weight on the scale and press OK",icon:"mdi-weight-gram"},{message:"Calibration complete",icon:"mdi-check"}]},methods:{sendRequest(){console.log(this.step);this.url,this.url_port;this.$refs.loadingModal.open(),this.socket_instance.emit("calibrate_load_cell",{step:this.step+1,args:this.args}),this.responseTimeOut=setTimeout((()=>{this.$refs.loadingModal.fail()}),1e4)},nextStep(){this.sendRequest()},openModal(){this.choose_scale=!0,this.socket_instance.emit("pause_net_update",!0)},setScale(e){this.choose_scale=!1,this.calibrate_dialog=!0,this.step_info=this.calibration_steps[0],this.args=e},cancel(){this.step=0,this.choose_scale=!1,this.calibrate_dialog=!1},resetModal(){this.step=0,this.calibrate_dialog=!1,this.socket_instance.emit("resume_net_update",!0)}},watch:{step:function(e){this.step_info=this.calibration_steps[e]}},mounted(){this.step_info=this.calibration_steps[0],this.socket_instance.on("calibration_step_commited",(e=>{clearTimeout(this.responseTimeOut),this.step++,4==this.step&&this.resetModal(),this.$refs.loadingModal.close()}))},unmounted(){}};const Ke=(0,W.Z)(Re,[["render",Pe],["__scopeId","data-v-17efd3e4"]]);var He=Ke,Ye={name:"Configuration",components:{calibrateScale:He},data:()=>({configData:{loadcell:{ip:"",port:""}}}),computed:{...(0,w.rn)(["socket_instance"])},methods:{setTare(){this.socket_instance.emit("set_tare",{})},setZero(){this.socket_instance.emit("set_zero",{})},getConfig(){te.Z.get("/api/config").then((e=>{this.config=e.data})).catch((e=>{console.log(e)}))}}};const Ge=(0,W.Z)(Ye,[["render",Ie],["__scopeId","data-v-46f68a48"]]);var Je=Ge;a(5932);const Xe=[{path:"/",name:"Frozen Fish Analyzer",component:Oe},{path:"/history",name:"History",component:()=>a.e(908).then(a.bind(a,3214))},{path:"/broken-belly-test",name:"Broken Belly Test",component:()=>a.e(85).then(a.bind(a,3962))},{path:"/muestra/:id",name:"Sample",component:()=>a.e(655).then(a.bind(a,4199))},{path:"/lot-images",name:"lotImages",component:()=>a.e(229).then(a.bind(a,2696))},{path:"/config",name:"config",component:()=>Promise.resolve().then(a.bind(a,5932)),children:[{path:"",name:"Configuration",component:Je},{path:"weight-calibration",name:"weightCalibration",component:Ae},{path:"lot-info",name:"Lots Information",component:G},{path:"export-lot-data",name:"Export data",component:oe},{path:"vision-calibration",name:"Calibrate vision",component:z}]}],Qe=(0,L.p7)({history:(0,L.PO)("/"),routes:Xe});var et=Qe,tt=(0,w.MT)({state:{socket_instance:null,analyzing_lot:null},getters:{getAnalyzingLotNo(e){return e.analyzing_lot?e.analyzing_lot.lot_no:g["default"].NO_LOT_SELECTED}},mutations:{SET_SOCKET(e,t){e.socket_instance=t},SET_ANALYZING_LOT(e,t){e.analyzing_lot=t}},actions:{setSocketInstance({commit:e},t){e("SET_SOCKET",t)},setAnalyzingLot({commit:e},t){e("SET_ANALYZING_LOT",t)}},modules:{}}),at=(a(9773),a(8727)),lt=(0,at.Rd)();async function ot(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}ot(),(0,l.ri)(x).use(et).use(tt).use(lt).mount("#app")},2326:function(e,t,a){a.d(t,{Z:function(){return T}});var l=a(3396),o=a(7312),s=a(11),n=a(6572),i=a(1888),r=a(1334),d=a(3601),u=a(6422),c=a(3369),m=a(6824),h=a(8521),f=a(9234),p=a(3289),_=a(1544),g=a(2900);const w=e=>((0,l.dD)("data-v-33a90ce4"),e=e(),(0,l.Cn)(),e),k={class:"text-h5"},v=w((()=>(0,l._)("small",null,"*indicates required field",-1)));function y(e,t,a,w,y,b){const W=(0,l.up)("requestModal");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(o.T,{onClick:t[0]||(t[0]=t=>e.add_lot_dialog=!0),color:"primary",class:"buttons"},{default:(0,l.w5)((()=>[(0,l.Wm)(p.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-plus")])),_:1}),(0,l.Uk)(" Add ")])),_:1}),(0,l.Wm)(d.B,{modelValue:e.add_lot_dialog,"onUpdate:modelValue":t[8]||(t[8]=t=>e.add_lot_dialog=t),persistent:"",width:"70%","max-width":"920"},{default:(0,l.w5)((()=>[(0,l.Wm)(s._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n.E,{class:"mt-4"},{default:(0,l.w5)((()=>[(0,l._)("span",k,[(0,l.Wm)(p.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-plus")])),_:1}),(0,l.Uk)(" Add Lot ")])])),_:1}),(0,l.Wm)(i.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c.K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u.O,{ref:"formLot"},{default:(0,l.w5)((()=>[(0,l.Wm)(m.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(g.h,{rules:[b.required],modelValue:e.lot.supplier,"onUpdate:modelValue":t[1]||(t[1]=t=>e.lot.supplier=t),variant:"underlined",label:"Supplier name*"},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(g.h,{disabled:e.editing,rules:[b.required],modelValue:e.lot.lot_no,"onUpdate:modelValue":t[2]||(t[2]=t=>e.lot.lot_no=t),prefix:"#",variant:"underlined",label:"Lot #*"},null,8,["disabled","rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(g.h,{rules:[b.required],modelValue:e.lot.production_date,"onUpdate:modelValue":t[3]||(t[3]=t=>e.lot.production_date=t),variant:"underlined",label:"Production date *"},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(_.rL,{rules:[b.required],modelValue:e.lot.fish_species,"onUpdate:modelValue":t[4]||(t[4]=t=>e.lot.fish_species=t),variant:"underlined",items:["SAR","MACK","H-MACK"],label:"Fish species *"},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",sm:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(_.rL,{rules:[b.required],modelValue:e.lot.type,"onUpdate:modelValue":t[5]||(t[5]=t=>e.lot.type=t),variant:"underlined",items:["HGT","WR","HG"],label:"Type*"},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",sm:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(_.rL,{rules:[b.required],modelValue:e.lot.size,"onUpdate:modelValue":t[6]||(t[6]=t=>e.lot.size=t),variant:"underlined",items:["TALL","S/O","B/O","TOW","CLUB","NA"],label:"Size*"},null,8,["rules","modelValue"])])),_:1})])),_:1}),v,(0,l.Wm)(r.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f.C),(0,l.Wm)(o.T,{color:"blue-darken-1",variant:"text",onClick:t[7]||(t[7]=t=>e.add_lot_dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Close ")])),_:1}),(0,l.Wm)(o.T,{disabled:!e.formValid,onClick:b.addLot,color:"blue-darken-1",variant:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Save ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},512)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(W,{ref:"loadingModal"},null,512)])}var b=a(4161),W=a(1073),C=a(3711),x={name:"addLot",components:{requestModal:C.Z},data:()=>({formValid:!1,editing:!1,add_lot_dialog:!1,lot:{supplier:null,lot_no:null,production_date:null,fish_species:null,type:null,size:null,order_no:"a",wms_code:"a"}}),computed:{required(e){return!!e||"Field is required"},url_port:()=>W["default"].url_port(),url:()=>W["default"].url(),lotStructure:()=>({supplier:null,lot_no:null,production_date:null,fish_species:null,type:null,size:null,order_no:"a",wms_code:"a"})},methods:{async editItem(e){this.editing=!0,this.lot={...e},this.add_lot_dialog=!0},async addLot(){const{editing:e}=this;this.lot.wms_code=this.lot.lot_no,this.lot.order_no=this.lot.lot_no;const t=`${this.url}${this.url_port}`,a=e?"/edit_lot":"/add_lot";b.Z.post(`${t+a}`,this.lot,{headers:{Accept:"application/json"}}).then((t=>{e&&(this.editing=!1),this.$emit("onFinish",t.data),this.add_lot_dialog=!1,this.$refs.loadingModal.success()}),(e=>{console.log(e),this.$refs.loadingModal.fail()}))}},watch:{add_lot_dialog(e){e||(this.lot={...this.lotStructure})},lot:{handler(e){this.formValid=Object.values(e).every((e=>e))},deep:!0}}},L=a(89);const U=(0,L.Z)(x,[["render",y],["__scopeId","data-v-33a90ce4"]]);var T=U},7096:function(e,t,a){a.d(t,{Z:function(){return v}});var l=a(3396),o=a(7139),s=a(11),n=a(7103),i=a(9234),r=a(6824),d=a(8521),u=a(3289),c=a(8429);const m=e=>((0,l.dD)("data-v-593a8abe"),e=e(),(0,l.Cn)(),e),h={class:"d-flex mb-7"},f=m((()=>(0,l._)("small",{class:"pl-1"},"Keyboard shortcuts",-1))),p={class:"text--grey"};function _(e,t,a,m,_,g){return(0,l.wg)(),(0,l.j4)(c.y,{class:"help-container",modelValue:_.showShortcuts,"onUpdate:modelValue":t[1]||(t[1]=e=>_.showShortcuts=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(s._,{class:"cmds-container"},{default:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l._)("div",null,[(0,l._)("h2",null,[(0,l.Uk)(" Keyboard Shortcuts "),(0,l.Wm)(u.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-keyboard-variant")])),_:1})]),f]),(0,l.Wm)(i.C),(0,l.Wm)(u.t,{onClick:t[0]||(t[0]=e=>_.showShortcuts=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-close")])),_:1})]),(0,l.Wm)(r.o,{style:{height:"100%"},class:"px-5 pb-8"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.commandsList,((e,t)=>((0,l.wg)(),(0,l.j4)(d.D,{class:"d-flex justify-space-between",cols:"3",key:t},{default:(0,l.w5)((()=>[(0,l._)("div",p,(0,o.zw)(e.description),1),(0,l.Wm)(n.v,{style:{"border-radius":"0 !important"},tile:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.shortcut),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])}a(1073);var g={data(){return{showShortcuts:!1}},props:{commandsList:{type:Array,required:!0}},mounted(){window.addEventListener("keydown",this.handleKeydown)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeydown)},methods:{handleKeydown(e){"?"==e.key&&(console.warn(e),this.showShortcuts=!this.showShortcuts)}}},w=a(89);const k=(0,w.Z)(g,[["render",_],["__scopeId","data-v-593a8abe"]]);var v=k},883:function(e,t,a){a.d(t,{Z:function(){return k}});var l=a(3396),o=a(7139),s=a(7312),n=a(3289),i=a(4413);const r={style:{"text-transform":"capitalize"},class:"text-left"},d={key:0},u=["onClick"],c={key:0};function m(e,t,a,m,h,f){const p=(0,l.up)("request-modal");return(0,l.wg)(),(0,l.j4)(i.Y,{class:"mt-3",density:"compact"},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(f.lotStructure),(e=>((0,l.wg)(),(0,l.iD)("th",r,(0,o.zw)(e),1)))),256)),a.editable?((0,l.wg)(),(0,l.iD)("th",d)):(0,l.kq)("",!0)])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.lotList,((t,i)=>((0,l.wg)(),(0,l.iD)("tr",{class:(0,o.C_)([a.selectable?"selectable":null,e.selectedIndex===i?"selected-item":null]),onClick:e=>a.selectable?f.rowClicked(t,i):null,key:t.lot_id},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(f.lotStructure),(e=>((0,l.wg)(),(0,l.iD)("td",null,(0,o.zw)(t[e]),1)))),256)),a.editable?((0,l.wg)(),(0,l.iD)("td",c,[(0,l.Wm)(s.T,{class:"edit-button",icon:"",color:"blue",onClick:e=>f.editLot(t)},{default:(0,l.w5)((()=>[(0,l.Wm)(n.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-pencil")])),_:1})])),_:2},1032,["onClick"])])):(0,l.kq)("",!0)],10,u)))),128))]),(0,l.Wm)(p,{ref:"loadingModal"},null,512)])),_:1})}var h=a(4161),f=a(1073),p=a(3711),_={name:"lotList",components:{requestModal:p.Z},computed:{url_port:()=>f["default"].url_port(),url:()=>f["default"].url(),lotStructure(){return{supplier:"",lot_no:"",production_date:"",fish_species:"",type:"",size:"",order_no:"",wms_code:""}}},data:()=>({page:1,lotList:[],selectedIndex:null,lot:{supplier:"",lot_no:"",production_date:"",fish_species:"",type:"",size:"",order_no:"",wms_code:""}}),props:{editable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1}},methods:{rowClicked(e,t){console.log(t),this.selectedIndex=t,this.$emit("rowClicked",e)},editLot(e){this.$emit("editLot",e)},getLots(){this.$refs.loadingModal.open();const e=`${this.url}${this.url_port}`;h.Z.get(`${e}/lots/${this.page}`).then((e=>{this.$refs.loadingModal.delayedClose(500),console.warn(e.data.data),this.lotList=e.data.data})).catch((e=>{this.$refs.loadingModal.fail(),console.log(e)}))}},mounted(){this.getLots()}},g=a(89);const w=(0,g.Z)(_,[["render",m],["__scopeId","data-v-7def9878"]]);var k=w},2798:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(3396),o=a(7139),s=a(3289),n=a(9671);function i(e,t,a,i,r,d){return(0,l.wg)(),(0,l.j4)(n.v,{color:e.type,modelValue:e.snackbar,"onUpdate:modelValue":t[0]||(t[0]=t=>e.snackbar=t),timeout:e.timeout},{actions:(0,l.w5)((()=>[(0,l.Wm)(s.t,{onClick:d.close},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-close")])),_:1},8,["onClick"])])),default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.text)+" ",1)])),_:1},8,["color","modelValue","timeout"])}var r={name:"pushNotification",data:()=>({snackbar:!1,timeout:800,text:"Hello, I am a snackbar",type:"info"}),props:{},methods:{close(){this.snackbar=!1},push(e,t,a){this.snackbar&&this.close(),this.text=e||this.text,this.type=t||this.type,this.timeout=a||this.timeout,console.warn(this.text),this.snackbar=!0}}},d=a(89);const u=(0,d.Z)(r,[["render",i]]);var c=u},3711:function(e,t,a){a.d(t,{Z:function(){return p}});var l=a(3396),o=a(7139),s=a(11),n=a(3601),i=a(3289),r=a(3173);const d={class:"d-flex flex-column align-center justify-center",style:{flex:"1"}},u={class:"mt-4"};function c(e,t,a,c,m,h){return(0,l.wg)(),(0,l.j4)(n.B,{persistent:"",modelValue:e.loading_dialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.loading_dialog=t),width:"300px"},{default:(0,l.w5)((()=>[(0,l.Wm)(s._,{height:"250px",class:"pa-5"},{default:(0,l.w5)((()=>[e.icon?((0,l.wg)(),(0,l.j4)(i.t,{key:0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.icon),1)])),_:1})):(0,l.kq)("",!0),(0,l._)("div",d,[e.status==h.status_codes.loading?((0,l.wg)(),(0,l.j4)(r.L,{key:0,rotate:360,size:100,width:8,indeterminate:"",color:"primary"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.responses,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[e.status==a?((0,l.wg)(),(0,l.j4)(i.t,{key:0,color:t.color,size:"100px"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.icon),1)])),_:2},1032,["color"])):(0,l.kq)("",!0)],64)))),256)),(0,l._)("span",u,[(0,l._)("b",null,(0,o.zw)(e.message),1)])])])),_:1})])),_:1},8,["modelValue"])}a(1073);var m={name:"requestModal",data:()=>({loading_dialog:!1,message:"",icon:"",status:0}),computed:{responses:()=>({1:{icon:"mdi-check",color:"green",message:"Data loaded successfully"},2:{icon:"mdi-alert",color:"red",message:"Failed to load data"}}),status_codes:()=>({loading:0,success:1,fail:2})},props:{onLoadingMessage:{type:String,default:"Loading..."},onFailMessage:{type:String,default:"Failed to load data"},onSuccessMessage:{type:String,default:"Data loaded successfully"}},methods:{testOnSuccess(){this.open(),setTimeout((()=>{this.success()}),5e3)},testOnFail(){this.open(),setTimeout((()=>{this.fail()}),5e3)},close(){this.loading_dialog=!1},delayedClose(e=2e3){setTimeout((()=>{this.close()}),e)},open(){this.loading_dialog=!0,this.status=this.status_codes.loading,this.message=this.onLoadingMessage},fail(){this.message=this.onFailMessage,this.status=this.status_codes.fail,setTimeout((()=>{this.close()}),2e3)},success(){this.message=this.onSuccessMessage,this.status=this.status_codes.success,setTimeout((()=>{this.close()}),2e3)}},mounted(){}},h=a(89);const f=(0,h.Z)(m,[["render",c]]);var p=f},7943:function(e,t,a){a.d(t,{Z:function(){return y}});var l=a(3396),o=a(7312),s=a(11),n=a(1334),i=a(3601),r=a(9234),d=a(3289);const u=e=>((0,l.dD)("data-v-55342a43"),e=e(),(0,l.Cn)(),e),c={class:"px-5 pt-4 text-h6"},m={class:"pa-5"},h={class:"d-flex customized-add"},f=u((()=>(0,l._)("small",{class:"text-gray mt-2"},"*Select one lot to continue ",-1)));function p(e,t,a,u,p,_){const g=(0,l.up)("lot-list"),w=(0,l.up)("add-lot");return(0,l.wg)(),(0,l.j4)(i.B,{persistent:e.should_persist,modelValue:e.open_select,"onUpdate:modelValue":t[0]||(t[0]=t=>e.open_select=t),width:"62%"},{default:(0,l.w5)((()=>[(0,l.Wm)(s._,null,{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l.Wm)(d.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-format-list-checks")])),_:1}),(0,l.Uk)(" Select Lot ")]),(0,l._)("div",m,[(0,l.Wm)(g,{ref:"lots",class:"list-container",selectable:"",onRowClicked:_.selectedItem},null,8,["onRowClicked"]),(0,l._)("div",h,[f,(0,l.Wm)(r.C),(0,l.Wm)(w,{onOnFinish:_.editedHandler},null,8,["onOnFinish"])])]),(0,l.Wm)(n.h,{class:"mb-2 mx-2"},{default:(0,l.w5)((()=>[e.should_persist?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(o.T,{key:0,color:"error",onClick:_.close},{default:(0,l.w5)((()=>[(0,l.Wm)(d.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-close")])),_:1}),(0,l.Uk)(" Cancel ")])),_:1},8,["onClick"])),(0,l.Wm)(r.C),(0,l.Wm)(o.T,{disabled:!e.selected_item,color:"primary",onClick:_.emitSelected},{default:(0,l.w5)((()=>[(0,l.Wm)(d.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-check")])),_:1}),(0,l.Uk)(" Select ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["persistent","modelValue"])}var _=a(2326),g=a(883),w={name:"selectLot",components:{lotList:g.Z,addLot:_.Z},data:()=>({open_select:!1,selected_item:null,should_persist:!1}),props:["modelValue"],emits:["update:modelValue"],methods:{close(){this.should_persist=!1,this.open_select=!1},editedHandler(){this.$refs.lots.getLots()},selectedItem(e){this.selected_item=e},emitSelected(){this.$emit("update:modelValue",this.selected_item),this.close()}}},k=a(89);const v=(0,k.Z)(w,[["render",p],["__scopeId","data-v-55342a43"]]);var y=v},5932:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var l=a(3396);function o(e,t,a,o,s,n){const i=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(i)}var s={name:"ConfigWrapper"},n=a(89);const i=(0,n.Z)(s,[["render",o]]);var r=i}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var s=t[l]={exports:{}};return e[l](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,s){if(!l){var n=1/0;for(u=0;u<e.length;u++){l=e[u][0],o=e[u][1],s=e[u][2];for(var i=!0,r=0;r<l.length;r++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(i=!1,s<n&&(n=s));if(i){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[l,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(l,o){if(1&o&&(l=this(l)),8&o)return l;if("object"===typeof l&&l){if(4&o&&l.__esModule)return l;if(16&o&&"function"===typeof l.then)return l}var s=Object.create(null);a.r(s);var n={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&l;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){n[e]=function(){return l[e]}}));return n["default"]=function(){return l},a.d(s,n),s}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"static/js/"+{85:"brokenBellyTest",229:"lotImages",461:"webfontloader",655:"muestra",908:"history"}[e]+"."+{85:"48de5f8f",229:"2b14c86b",461:"636edd0e",655:"2ade1ebe",908:"79816569"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"static/css/"+{229:"lotImages",655:"muestra",908:"history"}[e]+"."+{229:"f31a5192",655:"10e29488",908:"1ef720c7"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="video_streaming:";a.l=function(l,o,s,n){if(e[l])e[l].push(o);else{var i,r;if(void 0!==s)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==l||c.getAttribute("data-webpack")==t+s){i=c;break}}i||(r=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+s),i.src=l),e[l]=[o];var m=function(t,a){i.onerror=i.onload=null,clearTimeout(h);var o=e[l];if(delete e[l],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),r&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,l,o){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var n=function(a){if(s.onerror=s.onload=null,"load"===a.type)l();else{var n=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=n,r.request=i,s.parentNode&&s.parentNode.removeChild(s),o(r)}};return s.onerror=s.onload=n,s.href=t,a?a.parentNode.insertBefore(s,a.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var o=a[l],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var n=document.getElementsByTagName("style");for(l=0;l<n.length;l++){o=n[l],s=o.getAttribute("data-href");if(s===e||s===t)return o}},l=function(l){return new Promise((function(o,s){var n=a.miniCssF(l),i=a.p+n;if(t(n,i))return o();e(l,i,null,o,s)}))},o={143:0};a.f.miniCss=function(e,t){var a={229:1,655:1,908:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=l(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,l){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)l.push(o[2]);else{var s=new Promise((function(a,l){o=e[t]=[a,l]}));l.push(o[2]=s);var n=a.p+a.u(t),i=new Error,r=function(l){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=l&&("load"===l.type?"missing":l.type),n=l&&l.target&&l.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",i.name="ChunkLoadError",i.type=s,i.request=n,o[1](i)}};a.l(n,r,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,s,n=l[0],i=l[1],r=l[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var u=r(a)}for(t&&t(l);d<n.length;d++)s=n[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},l=self["webpackChunkvideo_streaming"]=self["webpackChunkvideo_streaming"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(6199)}));l=a.O(l)})();
//# sourceMappingURL=app.1b8d65ca.js.map